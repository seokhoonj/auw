% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/risk.R
\name{risk_plot}
\alias{risk_plot}
\title{Risk rate plot}
\usage{
risk_plot(
  risk_info,
  x,
  logscale = FALSE,
  max_label = TRUE,
  age_interval = 10,
  nrow = NULL,
  ncol = NULL,
  scales = "fixed",
  theme = c("view", "save", "shiny"),
  ...
)
}
\arguments{
\item{risk_info}{A data frame containing at least the columns \code{risk_nm},
\code{gender} (factor), \code{age} (numeric), and \code{rate} (numeric).}

\item{x}{Character vector of risk names to include (matching \code{risk_nm}).
If omitted, the function interactively prompts. Use \code{"all"} to include all.}

\item{logscale}{Logical; if \code{TRUE}, use a log10 y-scale. Otherwise linear.}

\item{max_label}{Logical; if \code{TRUE}, draw labels for per-gender maxima within
each \code{risk_nm} facet (showing \verb{max rate (age)}).}

\item{age_interval}{Integer; controls the number of x-axis breaks by
\code{floor(uniqueN(age) / age_interval)}. Default is \code{10}.}

\item{nrow, ncol}{Number of rows/columns passed to \code{ggplot2::facet_wrap()}.}

\item{scales}{Facet scales: \code{"fixed"} (default), \code{"free"}, \code{"free_x"},
or \code{"free_y"}. Passed to \code{facet_wrap()}.}

\item{theme}{One of \code{"view"}, \code{"save"}, or \code{"shiny"}; forwarded to
\code{ggshort::switch_theme()}.}

\item{...}{Additional arguments forwarded to \code{ggshort::switch_theme()}
(e.g., \code{theme_view}, \code{theme_save}, \code{theme_shiny} options).}
}
\value{
A \code{ggplot} object.
}
\description{
Draw line plots of risk rates by \code{age} and \code{gender}, faceted by \code{risk_nm}.
Optionally annotate each facet with the maximum rate (and the \code{age} at which
it occurs). Colors are provided by \code{ggshort::scale_color_pair_manual()}.
}
\details{
\itemize{
\item When \code{max_label = TRUE}, per-facet labels are assembled and drawn using
\code{geom_label()} with \code{family = getOption("ggshort.font")}.
\item If the maximum of \code{rate} is \verb{<= 1}, y-axis labels are formatted as percent;
otherwise shown on the raw scale (or log-scale if \code{logscale = TRUE}).
}
}
\examples{
\dontrun{
# Basic usage (all risks)
risk_plot(risk_info, x = "all")

# Specific risks, log scale, custom facet layout
risk_plot(risk_info,
          x = c("risk rate 1", "risk rate 2"),
          logscale = TRUE, nrow = 1, scales = "free_y")
}

}
