% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ae-ratio.R
\name{summarise_aer}
\alias{summarise_aer}
\title{Summarise Actual-to-Expected (A/E) Statistics}
\usage{
summarise_aer(
  df,
  group_var,
  value_var = c("loss", "rp"),
  period_var = c("uym"),
  elapsed_var = c("elpm")
)
}
\arguments{
\item{df}{A data.frame containing experience data with loss and risk premium.}

\item{group_var}{Column(s) used for grouping (e.g., product, gender).}

\item{value_var}{Character vector specifying the value columns, typically
\code{c("loss", "rp")} where:
\itemize{
\item \code{loss} = actual claims (observed loss),
\item \code{rp}   = risk premium (expected claims).
}}

\item{period_var}{Column(s) defining the exposure period (e.g., underwriting year-month).}

\item{elapsed_var}{Column(s) defining elapsed periods (e.g., months since issue).}
}
\value{
A data.frame (or tibble/data.table depending on input) with class
\code{"aer"}, containing the following derived columns:
\describe{
\item{n_sample}{Number of distinct periods observed}
\item{closs, crp}{Cumulative loss and cumulative risk premium}
\item{margin, cmargin}{Period and cumulative margin (\code{rp - loss})}
\item{profit, cprofit}{Profit indicator (factor \code{"pos"}/\code{"neg"})}
\item{aer}{Actual-to-Expected ratio (\code{loss / rp})}
\item{caer}{Cumulative A/E ratio (\code{closs / crp})}
}

The returned object also has an attribute \code{"longer"} containing
a melted long-format version (\code{class = "aer_longer"}).
}
\description{
Compute group-wise statistics for loss and risk premium (\code{rp}) data, including:
\itemize{
\item cumulative loss, risk premium, margin, and profit indicators,
\item sample sizes by period and elapsed period,
\item actual-to-expected ratio (\code{aer = loss / rp}) and cumulative A/E ratio (\code{caer = closs / crp}).
}

This function aggregates experience data by specified grouping,
period, and elapsed-period variables, and returns both wide
and long-form results.
}
\examples{
\dontrun{
df <- data.frame(
  product = rep(c("A", "B"), each = 6),
  uym = rep(1:3, 4),
  elpm = rep(1:2, 6),
  loss = runif(12, 80, 120),
  rp   = runif(12, 90, 110)  # risk premium (expected)
)
res <- summarise_aer_stat(
  df,
  group_var  = product,
  value_var  = c("loss", "rp"),
  period_var = "uym",
  elapsed_var = "elpm"
)
head(res)
attr(res, "longer")
}

}
